
# 🎬 DOCUMENTATION - PARCOURS UTILISATEUR PAGES ANIME

## ARCHITECTURE DES FICHIERS ANIME

### 1. anime-sama.tsx - Catalogue et recherche
**URL :** `/anime-sama`
**Rôle :** Page de découverte et recherche d'animes

**Fonctionnalités utilisateur :**
- 🔍 Recherche en temps réel avec délai de 300ms
- 📱 Interface style Anime-Sama avec header sticky
- 🔥 Grille d'animes populaires chargés automatiquement
- 👆 Navigation vers détails anime via clic

**API utilisée :**
```
Base URL: https://anime-sama-scraper.vercel.app
- Recherche: GET /api/search?query={terme}
- Populaires: GET /api/trending
```

**États gérés :**
- searchQuery: terme de recherche
- searchResults: résultats de recherche
- popularAnimes: animes populaires
- loading/error states

---

### 2. anime.tsx - Détails et sélection de saison
**URL :** `/anime/{id}`
**Rôle :** Affichage détaillé et lancement de visionnage

**Fonctionnalités utilisateur :**
- 📋 Consultation complète (banner, description, genres, statut, année)
- 🎭 Sélection de saison via grille de boutons
- ▶️ Lancement automatique vers lecteur
- 🔙 Retour vers catalogue

**API utilisée :**
```
- Détails: GET /api/anime/{id}
```

**Navigation automatique :**
```
onClick saison → /anime/{id}/player?season={value}&episode=1&lang=vostfr
```

**États gérés :**
- animeDetails: informations complètes de l'anime
- loading/error states pour chargement détails

---

### 3. anime-player.tsx - Lecteur vidéo intégré
**URL :** `/anime/{id}/player?season={value}&episode={num}&lang={lang}`
**Rôle :** Visionnage avec contrôles avancés

**Fonctionnalités utilisateur :**
- 🎬 Auto-play intelligent basé sur URL
- 🌐 Sélecteur de langue (VF/VOSTFR) avec drapeaux
- 📺 Dropdown sélection épisode
- 🖥️ Changement de serveur (fallback automatique)
- ⏭️ Navigation précédent/suivant
- 🔙 Retour vers page détails

**APIs utilisées :**
```
- Épisodes: GET /api/episodes/{id}?season={value}&language={lang}
- URLs directes: GET /api/embed?url={episodeUrl}
```

**États gérés :**
- episodes: liste des épisodes
- currentEpisode: épisode en cours
- currentLanguage: langue sélectionnée
- servers: serveurs disponibles
- videoUrl: URL de lecture
- loading/error states pour chaque action

## FLUX DE NAVIGATION DÉTAILLÉ

```
ÉTAPE 1: anime-sama.tsx
    ↓
Utilisateur recherche/découvre
    ↓
Clic sur anime
    ↓

ÉTAPE 2: anime.tsx  
    ↓
Consultation détails
    ↓
Sélection saison
    ↓

ÉTAPE 3: anime-player.tsx
    ↓
Auto-play épisode 1
    ↓
Navigation entre épisodes
```

## CONFIGURATION TECHNIQUE

### Format URLs standardisé :
```
/anime/{id}/player?season={value}&episode={num}&lang={lang}
```

### Paramètres par défaut :
- episode=1 (premier épisode)
- lang=vostfr (langue par défaut)

### Gestion des erreurs :
- Auto-retry sur échecs API
- Fallback vers autres serveurs
- Messages utilisateur explicites
- Loading states pour chaque action

### Interface Anime-Sama authentique :
- Couleurs : bleu (#0066cc), noir, blanc
- Fonts : style anime/manga
- Drapeaux visuels : 🇫🇷 (VF) et 🇯🇵 (VOSTFR)
- Dropdowns stylisés avec bordures bleues
- Texte en majuscules pour les sélecteurs

## POINTS TECHNIQUES CLÉS

### Auto-play intelligent :
- Lecture basée sur paramètres URL
- Reprise automatique où l'utilisateur s'est arrêté
- Persistance en localStorage

### API Externa Anime-Sama :
- Scraping du site officiel
- URLs directes vers vidéos
- Gestion multi-serveurs
- Support VF/VOSTFR

### Navigation intuitive :
- Boutons retour cohérents
- URLs directes partageables
- Historique de navigation préservé
- Responsive mobile-first

Cette architecture offre une expérience utilisateur fluide optimisée pour le streaming d'animes avec navigation naturelle : découverte → détails → visionnage.
